You are tasked with resolving a runtime crash:
`Tensor dimensions mismatch` thrown inside `fill_tensor` (Utils.h:460)
on the KANTSU2E board.

You MUST fix the issue by making runtime tensor allocation and Python weight
generation derive their dimensions from the SAME logic.

Proceed in the following strict order.

---

## Step 1: Identify Runtime Source of Truth
- Locate the exact C/C++ code that computes:
  - conv output height and width
  - pooling output height and width
  - flatten tensor size
- Identify which values are rounded, floored, or truncated.
- This code is the authoritative definition.

Document file names, functions, and formulas.

---

## Step 2: Identify Python Assumptions
- Locate Python code that computes or assumes:
  - conv output shape
  - pooling output shape
  - flatten size
- Document how Python currently derives these numbers.

---

## Step 3: Detect the Exact Mismatch
- Compute numeric flatten size on runtime side.
- Compute numeric flatten size on Python side.
- Show the exact difference (example: runtime=10, python=8).

---

## Step 4: Choose ONE Fix Strategy (Mandatory)
Choose exactly one:

A) Modify Python generation to match runtime math  
B) Modify runtime tensor allocation to match Python math

Justify the choice.

---

## Step 5: Implement the Fix
- Update code accordingly.
- Ensure dense weight and bias files exactly match runtime expectations.
- Do NOT hardcode magic numbers.
- Ensure changes apply only to KANTSU2E board.

---

## Step 6: Verify
- Print tensor element count before `fill_tensor`.
- Print NPY element count before loading.
- Confirm they are equal for:
  - dense0_extra
  - dense0

---

## Rules
- No guessing.
- No reshaping to “make it pass”.
- No reusing other board logic.
- Fix must be mathematically correct and reproducible.

---

Output:
- Explanation of the root cause.
- Exact code changes with file names and line numbers.
- Confirmation that `fill_tensor` no longer throws.